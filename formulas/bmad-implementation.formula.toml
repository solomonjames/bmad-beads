description = "Phase 4: Sprint execution — planning, story prep, development, review, and retrospective"
formula = "bmad-implementation"
type = "workflow"
version = 1

[[steps]]
description = """
Agent: Bob (SM) — Load persona from .beads/skills/bmad/agents/sm.md
Follow: .beads/skills/bmad/phase-4-implementation/sprint-planning/step-01-plan.md
Inputs: Epics document, architecture document
Output: {{impl_artifacts}}/sprint-status.yaml with all epics and stories tracked"""
id = "sprint-plan"
title = "Sprint planning for {{project_name}}"

[[steps]]
depends_on = ["sprint-plan"]
description = """
Human review gate. Bob (SM) presents sprint plan and sequence.
Checklist: All stories included? Sequence logical? Dependencies respected?
Output: Approved sprint plan"""
id = "sprint-plan-review"
title = "Review and approve sprint plan"
type = "human"

[[steps]]
depends_on = ["sprint-plan-review"]
description = """
Agent: Bob (SM) — .beads/skills/bmad/agents/sm.md
Follow: .beads/skills/bmad/phase-4-implementation/create-story/step-01-prepare.md
Inputs: Sprint status, epics, architecture, previous stories
Output: Story file with ready-for-dev status and comprehensive dev context"""
id = "story-prep"
title = "Prepare next story with ultimate context"

[[steps]]
depends_on = ["story-prep"]
description = """
Agent: Amelia (Dev) — Load persona from .beads/skills/bmad/agents/dev.md
Follow: .beads/skills/bmad/phase-4-implementation/dev-story/step-01-implement.md
Inputs: Story file with ready-for-dev status
Output: Implemented story with all tests passing, status set to review"""
id = "story-dev"
title = "Implement story"

[[steps]]
depends_on = ["story-dev"]
description = """
Agent: Senior Developer (adversarial reviewer)
Follow: .beads/skills/bmad/phase-4-implementation/code-review/step-01-review.md
Inputs: Story in review status, git diff
Output: Minimum 3 findings documented, fixes applied, story marked done or returned"""
id = "story-review"
title = "Adversarial code review"

[[steps]]
depends_on = ["story-review"]
description = """
Human review gate. Verify code review findings resolved and story meets quality bar.
Note: For multi-story sprints, repeat story-prep → story-dev → story-review cycle per story."""
id = "story-review-gate"
title = "Approve story completion"
type = "human"

[[steps]]
depends_on = ["story-review-gate"]
description = """
Agent: All agents (Party Mode) — Load all relevant personas
Follow: .beads/skills/bmad/phase-4-implementation/retrospective/step-01-retro.md
Inputs: Completed epic stories, sprint-status, previous retro
Output: Retrospective document with lessons, action items, next epic preparation"""
id = "sprint-retro"
title = "Epic retrospective"

[vars]
[vars.impl_artifacts]
default = "_bmad-output/implementation-artifacts"
description = "Path to implementation artifacts directory"
[vars.planning_artifacts]
default = "_bmad-output/planning-artifacts"
description = "Path to planning artifacts directory"
[vars.project_name]
description = "Project name"
required = true
